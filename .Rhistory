plot(df$time, df$score, type = "l", col = adjustcolor("black", 0.5))
abline(h = pks$cutoff, lty = 2, col = "green")
# points(pks$selection.table$time, pks$selection.table$score, col = "red")
x <- findpeaks(df$score, npeaks=Inf, threshold = 0, sortstr=TRUE, minpeakheight = 0.2, ndowns = 10, nups = 4, minpeakdistance = 100)
points(df$time[x[, 2]], x[, 1], pch=20, col=adjustcolor("blue", 0.2))
L <- hampel(df$score, k = 512)
points(df$time[L$ind], df$score[L$ind], pch=20, col=adjustcolor("red", 0.3))
# sort(pks$selection.table$time[x[, 2]])
# move_imgs(from = .Options$warbleR$wav.path, to = "./data/processed", cut = TRUE, overwrite = TRUE)
df <- pks$scores[pks$scores$time >= 80 & pks$scores$time <= 120, ]
par(mar = rep(2, 4))
plot(df$time, df$score, type = "l", col = adjustcolor("black", 0.5))
abline(h = pks$cutoff, lty = 2, col = "green")
# points(pks$selection.table$time, pks$selection.table$score, col = "red")
x <- findpeaks(df$score, npeaks=Inf, threshold = 0, sortstr=TRUE, minpeakheight = 0.2, ndowns = 10, nups = 4, minpeakdistance = 100)
points(df$time[x[, 2]], x[, 1], pch=20, col=adjustcolor("blue", 0.2))
L <- hampel(df$score, k = 512, t0 = 10)
points(df$time[L$ind], df$score[L$ind], pch=20, col=adjustcolor("red", 0.3))
# sort(pks$selection.table$time[x[, 2]])
# move_imgs(from = .Options$warbleR$wav.path, to = "./data/processed", cut = TRUE, overwrite = TRUE)
df <- pks$scores[pks$scores$time >= 80 & pks$scores$time <= 120, ]
par(mar = rep(2, 4))
plot(df$time, df$score, type = "l", col = adjustcolor("black", 0.5))
abline(h = pks$cutoff, lty = 2, col = "green")
# points(pks$selection.table$time, pks$selection.table$score, col = "red")
x <- findpeaks(df$score, npeaks=Inf, threshold = 0, sortstr=TRUE, minpeakheight = 0.2, ndowns = 10, nups = 4, minpeakdistance = 100)
points(df$time[x[, 2]], x[, 1], pch=20, col=adjustcolor("blue", 0.2))
L <- hampel(df$score, k = 1024, t0 = 10)
points(df$time[L$ind], df$score[L$ind], pch=20, col=adjustcolor("red", 0.3))
# sort(pks$selection.table$time[x[, 2]])
# move_imgs(from = .Options$warbleR$wav.path, to = "./data/processed", cut = TRUE, overwrite = TRUE)
df <- pks$scores[pks$scores$time >= 80 & pks$scores$time <= 120, ]
par(mar = rep(2, 4))
plot(df$time, df$score, type = "l", col = adjustcolor("black", 0.5))
abline(h = pks$cutoff, lty = 2, col = "green")
# points(pks$selection.table$time, pks$selection.table$score, col = "red")
x <- findpeaks(df$score, npeaks=Inf, threshold = 0, sortstr=TRUE, minpeakheight = 0.2, ndowns = 10, nups = 4, minpeakdistance = 100)
points(df$time[x[, 2]], x[, 1], pch=20, col=adjustcolor("blue", 0.2))
L <- hampel(df$score, k = 1024, t0 = 20)
points(df$time[L$ind], df$score[L$ind], pch=20, col=adjustcolor("red", 0.3))
# sort(pks$selection.table$time[x[, 2]])
# move_imgs(from = .Options$warbleR$wav.path, to = "./data/processed", cut = TRUE, overwrite = TRUE)
df <- pks$scores[pks$scores$time >= 80 & pks$scores$time <= 120, ]
par(mar = rep(2, 4))
plot(df$time, df$score, type = "l", col = adjustcolor("black", 0.5))
abline(h = pks$cutoff, lty = 2, col = "green")
# points(pks$selection.table$time, pks$selection.table$score, col = "red")
x <- findpeaks(df$score, npeaks=Inf, threshold = 0, sortstr=TRUE, minpeakheight = 0.2, ndowns = 10, nups = 4, minpeakdistance = 100)
points(df$time[x[, 2]], x[, 1], pch=20, col=adjustcolor("blue", 0.2))
L <- hampel(df$score, k = 100, t0 = 20)
points(df$time[L$ind], df$score[L$ind], pch=20, col=adjustcolor("red", 0.3))
# sort(pks$selection.table$time[x[, 2]])
# move_imgs(from = .Options$warbleR$wav.path, to = "./data/processed", cut = TRUE, overwrite = TRUE)
L <- hampel(c(df$score, rep(0, 1000)), k = 100, t0 = 20)
points(df$time[L$ind], df$score[L$ind], pch=20, col=adjustcolor("red", 0.3))
df <- pks$scores[pks$scores$time >= 80 & pks$scores$time <= 120, ]
par(mar = rep(2, 4))
plot(df$time, df$score, type = "l", col = adjustcolor("black", 0.5))
abline(h = pks$cutoff, lty = 2, col = "green")
# points(pks$selection.table$time, pks$selection.table$score, col = "red")
x <- findpeaks(df$score, npeaks=Inf, threshold = 0, sortstr=TRUE, minpeakheight = 0.2, ndowns = 10, nups = 4, minpeakdistance = 100)
points(df$time[x[, 2]], x[, 1], pch=20, col=adjustcolor("blue", 0.2))
L <- hampel(c(rep(0, 1000), df$score, rep(0, 1000)), k = 100, t0 = 20)
points(df$time[L$ind - 1000], df$score[L$ind - 1000], pch=20, col=adjustcolor("red", 0.3))
# sort(pks$selection.table$time[x[, 2]])
# move_imgs(from = .Options$warbleR$wav.path, to = "./data/processed", cut = TRUE, overwrite = TRUE)
df <- pks$scores[pks$scores$time >= 80 & pks$scores$time <= 120, ]
par(mar = rep(2, 4))
plot(df$time, df$score, type = "l", col = adjustcolor("black", 0.5))
abline(h = pks$cutoff, lty = 2, col = "green")
# points(pks$selection.table$time, pks$selection.table$score, col = "red")
x <- findpeaks(df$score, npeaks=Inf, threshold = 0, sortstr=TRUE, minpeakheight = 0.2, ndowns = 10, nups = 4, minpeakdistance = 100)
points(df$time[x[, 2]], x[, 1], pch=20, col=adjustcolor("blue", 0.2))
L <- hampel(c(rep(0, 1000), df$score, rep(0, 1000)), k = 1024, t0 = 20)
points(df$time[L$ind - 1000], df$score[L$ind - 1000], pch=20, col=adjustcolor("red", 0.3))
# sort(pks$selection.table$time[x[, 2]])
# move_imgs(from = .Options$warbleR$wav.path, to = "./data/processed", cut = TRUE, overwrite = TRUE)
L$ind
maxl <- L$ind
maxl$ind <- maxl$ind - 1000
maxl <- L$ind
maxl$ind <- maxl$ind - 1000
maxl$ind
maxl <- L$ind
maxl
maxl <- maxl - 1000
maxl
w <- c(rep(0, 1000), df$score, rep(0, 1000))
L <- hampel(w, k = 1024, t0 = 20)
maxl <- cbind(L$ind, w)
maxl
maxl <- cbind(L$ind - 1000, w)
w <- c(rep(0, 1000), df$score, rep(0, 1000))
L <- hampel(w, k = 1024, t0 = 20)
maxl <- cbind(L$ind, w - 1000)
L$ind
w
w <- c(rep(0, 1000), df$score, rep(0, 1000))
L <- hampel(w, k = 1024, t0 = 20)
L$ind
maxl <- cbind(L$ind, w[L$ind] - 1000)
maxl
w <- c(rep(0, 1000), df$score, rep(0, 1000))
L <- hampel(w, k = 1024, t0 = 20)
maxl <- cbind(L$ind, w[L$ind])
maxl
w <- c(rep(0, 1000), df$score, rep(0, 1000))
L <- hampel(w, k = 1024, t0 = 20)
points(df$time[L$ind - 1000], df$score[L$ind - 1000], pch=20, col=adjustcolor("red", 0.3))
df <- pks$scores[pks$scores$time >= 80 & pks$scores$time <= 120, ]
par(mar = rep(2, 4))
plot(df$time, df$score, type = "l", col = adjustcolor("black", 0.5))
abline(h = pks$cutoff, lty = 2, col = "green")
# points(pks$selection.table$time, pks$selection.table$score, col = "red")
x <- findpeaks(df$score, npeaks=Inf, threshold = 0, sortstr=TRUE, minpeakheight = 0.2, ndowns = 10, nups = 4, minpeakdistance = 100)
points(df$time[x[, 2]], x[, 1], pch=20, col=adjustcolor("blue", 0.2))
w <- c(rep(0, 1000), df$score, rep(0, 1000))
L <- hampel(w, k = 1024, t0 = 20)
points(df$time[L$ind - 1000], df$score[L$ind - 1000], pch=20, col=adjustcolor("red", 0.3))
# sort(pks$selection.table$time[x[, 2]])
# move_imgs(from = .Options$warbleR$wav.path, to = "./data/processed", cut = TRUE, overwrite = TRUE)
df <- pks$scores[pks$scores$time >= 80 & pks$scores$time <= 120, ]
par(mar = rep(2, 4))
plot(df$time, df$score, type = "l", col = adjustcolor("black", 0.5))
abline(h = pks$cutoff, lty = 2, col = "green")
# points(pks$selection.table$time, pks$selection.table$score, col = "red")
x <- findpeaks(df$score, npeaks=Inf, threshold = 0, sortstr=TRUE, minpeakheight = 0.2, ndowns = 10, nups = 4, minpeakdistance = 100)
points(df$time[x[, 2]], x[, 1], pch=20, col=adjustcolor("blue", 0.2))
# w <- c(rep(0, 1000), df$score, rep(0, 1000))
# L <- hampel(w, k = 1024, t0 = 20)
#
# points(df$time[L$ind - 1000], df$score[L$ind - 1000], pch=20, col=adjustcolor("red", 0.3))
# sort(pks$selection.table$time[x[, 2]])
# move_imgs(from = .Options$warbleR$wav.path, to = "./data/processed", cut = TRUE, overwrite = TRUE)
df <- pks$scores[pks$scores$time >= 80 & pks$scores$time <= 120, ]
par(mar = rep(2, 4))
plot(df$time, df$score, type = "l", col = adjustcolor("black", 0.5))
abline(h = pks$cutoff, lty = 2, col = "green")
# points(pks$selection.table$time, pks$selection.table$score, col = "red")
x <- findpeaks(df$score, npeaks=Inf, threshold = 0, sortstr=TRUE, minpeakheight = 0.1, ndowns = 10, nups = 4, minpeakdistance = 100)
points(df$time[x[, 2]], x[, 1], pch=20, col=adjustcolor("blue", 0.2))
# w <- c(rep(0, 1000), df$score, rep(0, 1000))
# L <- hampel(w, k = 1024, t0 = 20)
#
# points(df$time[L$ind - 1000], df$score[L$ind - 1000], pch=20, col=adjustcolor("red", 0.3))
# sort(pks$selection.table$time[x[, 2]])
# move_imgs(from = .Options$warbleR$wav.path, to = "./data/processed", cut = TRUE, overwrite = TRUE)
df <- pks$scores[pks$scores$time >= 80 & pks$scores$time <= 120, ]
par(mar = rep(2, 4))
plot(df$time, df$score, type = "l", col = adjustcolor("black", 0.5))
abline(h = pks$cutoff, lty = 2, col = "green")
# points(pks$selection.table$time, pks$selection.table$score, col = "red")
x <- findpeaks(df$score, npeaks=Inf, threshold = 0, sortstr=TRUE, minpeakheight = 0.1, ndowns = 10, nups = 4, minpeakdistance = 100)
points(df$time[x[, 2]], x[, 1], pch=20, col=adjustcolor("blue", 0.2))
# w <- c(rep(0, 1000), df$score, rep(0, 1000))
# L <- hampel(w, k = 1024, t0 = 20)
#
# points(df$time[L$ind - 1000], df$score[L$ind - 1000], pch=20, col=adjustcolor("red", 0.3))
# sort(pks$selection.table$time[x[, 2]])
# move_imgs(from = .Options$warbleR$wav.path, to = "./data/processed", cut = TRUE, overwrite = TRUE)
df <- pks$scores[pks$scores$time >= 80 & pks$scores$time <= 120, ]
par(mar = rep(2, 4))
plot(df$time, df$score, type = "l", col = adjustcolor("black", 0.5))
abline(h = pks$cutoff, lty = 2, col = "green")
# points(pks$selection.table$time, pks$selection.table$score, col = "red")
x <- findpeaks(df$score, npeaks=Inf, threshold = 0, sortstr=TRUE, minpeakheight = 0.1, ndowns = 10, nups = 4, minpeakdistance = 100)
points(df$time[x[, 2]], x[, 1], pch=20, col=adjustcolor("blue", 0.2))
# w <- c(rep(0, 1000), df$score, rep(0, 1000))
# L <- hampel(w, k = 1024, t0 = 20)
#
# points(df$time[L$ind - 1000], df$score[L$ind - 1000], pch=20, col=adjustcolor("red", 0.3))
# sort(pks$selection.table$time[x[, 2]])
# move_imgs(from = .Options$warbleR$wav.path, to = "./data/processed", cut = TRUE, overwrite = TRUE)
df <- pks$scores[pks$scores$time >= 80 & pks$scores$time <= 120, ]
par(mar = rep(2, 4))
plot(df$time, df$score, type = "l", col = adjustcolor("black", 0.5))
abline(h = pks$cutoff, lty = 2, col = "green")
# points(pks$selection.table$time, pks$selection.table$score, col = "red")
x <- findpeaks(df$score, npeaks=Inf, threshold = 0, sortstr=TRUE, minpeakheight = 0.1, ndowns = 10, nups = 4, minpeakdistance = 100)
points(df$time[x[, 2]], x[, 1], pch=20, col=adjustcolor("blue", 0.2))
# w <- c(rep(0, 1000), df$score, rep(0, 1000))
# L <- hampel(w, k = 1024, t0 = 20)
#
# points(df$time[L$ind - 1000], df$score[L$ind - 1000], pch=20, col=adjustcolor("red", 0.3))
# sort(pks$selection.table$time[x[, 2]])
# move_imgs(from = .Options$warbleR$wav.path, to = "./data/processed", cut = TRUE, overwrite = TRUE)
df <- pks$scores[pks$scores$time >= 80 & pks$scores$time <= 120, ]
par(mar = rep(2, 4))
plot(df$time, df$score, type = "l", col = adjustcolor("black", 0.5))
abline(h = pks$cutoff, lty = 2, col = "green")
# points(pks$selection.table$time, pks$selection.table$score, col = "red")
x <- findpeaks(df$score, npeaks=Inf, threshold = 0, sortstr=TRUE, minpeakheight = 0.1, ndowns = 10, nups = 4, minpeakdistance = 10)
points(df$time[x[, 2]], x[, 1], pch=20, col=adjustcolor("blue", 0.2))
# w <- c(rep(0, 1000), df$score, rep(0, 1000))
# L <- hampel(w, k = 1024, t0 = 20)
#
# points(df$time[L$ind - 1000], df$score[L$ind - 1000], pch=20, col=adjustcolor("red", 0.3))
# sort(pks$selection.table$time[x[, 2]])
# move_imgs(from = .Options$warbleR$wav.path, to = "./data/processed", cut = TRUE, overwrite = TRUE)
df <- pks$scores[pks$scores$time >= 80 & pks$scores$time <= 120, ]
par(mar = rep(2, 4))
plot(df$time, df$score, type = "l", col = adjustcolor("black", 0.5))
abline(h = pks$cutoff, lty = 2, col = "green")
# points(pks$selection.table$time, pks$selection.table$score, col = "red")
x <- findpeaks(df$score, npeaks=Inf, threshold = 0, sortstr=TRUE, minpeakheight = 0.1, ndowns = 10, nups = 4, minpeakdistance = 90)
points(df$time[x[, 2]], x[, 1], pch=20, col=adjustcolor("blue", 0.2))
# w <- c(rep(0, 1000), df$score, rep(0, 1000))
# L <- hampel(w, k = 1024, t0 = 20)
#
# points(df$time[L$ind - 1000], df$score[L$ind - 1000], pch=20, col=adjustcolor("red", 0.3))
# sort(pks$selection.table$time[x[, 2]])
# move_imgs(from = .Options$warbleR$wav.path, to = "./data/processed", cut = TRUE, overwrite = TRUE)
df <- pks$scores[pks$scores$time >= 80 & pks$scores$time <= 120, ]
par(mar = rep(2, 4))
plot(df$time, df$score, type = "l", col = adjustcolor("black", 0.5))
abline(h = pks$cutoff, lty = 2, col = "green")
# points(pks$selection.table$time, pks$selection.table$score, col = "red")
x <- findpeaks(df$score, npeaks=Inf, threshold = 0, sortstr=TRUE, minpeakheight = 0.05, ndowns = 10, nups = 4, minpeakdistance = 90)
points(df$time[x[, 2]], x[, 1], pch=20, col=adjustcolor("blue", 0.2))
# w <- c(rep(0, 1000), df$score, rep(0, 1000))
# L <- hampel(w, k = 1024, t0 = 20)
#
# points(df$time[L$ind - 1000], df$score[L$ind - 1000], pch=20, col=adjustcolor("red", 0.3))
# sort(pks$selection.table$time[x[, 2]])
# move_imgs(from = .Options$warbleR$wav.path, to = "./data/processed", cut = TRUE, overwrite = TRUE)
df <- pks$scores[pks$scores$time >= 80 & pks$scores$time <= 120, ]
par(mar = rep(2, 4))
plot(df$time, df$score, type = "l", col = adjustcolor("black", 0.5))
abline(h = pks$cutoff, lty = 2, col = "green")
# points(pks$selection.table$time, pks$selection.table$score, col = "red")
x <- findpeaks(df$score, npeaks=Inf, threshold = 0, sortstr=TRUE, minpeakheight = 0.05, ndowns = 10, nups = 4, minpeakdistance = 90)
points(df$time[x[, 2]], x[, 1], pch=20, col=adjustcolor("blue", 0.2))
# w <- c(rep(0, 1000), df$score, rep(0, 1000))
# L <- hampel(w, k = 1024, t0 = 20)
#
# points(df$time[L$ind - 1000], df$score[L$ind - 1000], pch=20, col=adjustcolor("red", 0.3))
# sort(pks$selection.table$time[x[, 2]])
# move_imgs(from = .Options$warbleR$wav.path, to = "./data/processed", cut = TRUE, overwrite = TRUE)
df <- pks$scores[pks$scores$time >= 80 & pks$scores$time <= 120, ]
par(mar = rep(2, 4))
plot(df$time, df$score, type = "l", col = adjustcolor("black", 0.5))
abline(h = pks$cutoff, lty = 2, col = "green")
# points(pks$selection.table$time, pks$selection.table$score, col = "red")
x <- findpeaks(df$score, npeaks=Inf, threshold = 0, sortstr=TRUE, minpeakheight = 0.01, ndowns = 10, nups = 4, minpeakdistance = 90)
points(df$time[x[, 2]], x[, 1], pch=20, col=adjustcolor("blue", 0.2))
# w <- c(rep(0, 1000), df$score, rep(0, 1000))
# L <- hampel(w, k = 1024, t0 = 20)
#
# points(df$time[L$ind - 1000], df$score[L$ind - 1000], pch=20, col=adjustcolor("red", 0.3))
# sort(pks$selection.table$time[x[, 2]])
# move_imgs(from = .Options$warbleR$wav.path, to = "./data/processed", cut = TRUE, overwrite = TRUE)
df <- pks$scores[pks$scores$time >= 80 & pks$scores$time <= 120, ]
par(mar = rep(2, 4))
plot(df$time, df$score, type = "l", col = adjustcolor("black", 0.5))
abline(h = pks$cutoff, lty = 2, col = "green")
# points(pks$selection.table$time, pks$selection.table$score, col = "red")
x <- findpeaks(df$score, npeaks=Inf, threshold = 0, sortstr=TRUE, minpeakheight = 0.2, ndowns = 10, nups = 4, minpeakdistance = 90)
points(df$time[x[, 2]], x[, 1], pch=20, col=adjustcolor("blue", 0.2))
# w <- c(rep(0, 1000), df$score, rep(0, 1000))
# L <- hampel(w, k = 1024, t0 = 20)
#
# points(df$time[L$ind - 1000], df$score[L$ind - 1000], pch=20, col=adjustcolor("red", 0.3))
# sort(pks$selection.table$time[x[, 2]])
# move_imgs(from = .Options$warbleR$wav.path, to = "./data/processed", cut = TRUE, overwrite = TRUE)
df <- pks$scores[pks$scores$time >= 80 & pks$scores$time <= 120, ]
par(mar = rep(2, 4))
plot(df$time, df$score, type = "l", col = adjustcolor("black", 0.5))
abline(h = pks$cutoff, lty = 2, col = "green")
# points(pks$selection.table$time, pks$selection.table$score, col = "red")
x <- findpeaks(df$score, npeaks=Inf, threshold = 0, sortstr=TRUE, minpeakheight = 0.2, ndowns = 10, nups = 4, minpeakdistance = 90)
points(df$time[x[, 2]], x[, 1], pch=20, col=adjustcolor("blue", 0.2))
# w <- c(rep(0, 1000), df$score, rep(0, 1000))
# L <- hampel(w, k = 1024, t0 = 20)
#
# points(df$time[L$ind - 1000], df$score[L$ind - 1000], pch=20, col=adjustcolor("red", 0.3))
# sort(pks$selection.table$time[x[, 2]])
# move_imgs(from = .Options$warbleR$wav.path, to = "./data/processed", cut = TRUE, overwrite = TRUE)
df <- pks$scores[pks$scores$time >= 80 & pks$scores$time <= 120, ]
par(mar = rep(2, 4))
plot(df$time, df$score, type = "l", col = adjustcolor("black", 0.5))
abline(h = pks$cutoff, lty = 2, col = "green")
# points(pks$selection.table$time, pks$selection.table$score, col = "red")
x <- findpeaks(df$score, npeaks=Inf, threshold = 0, sortstr=TRUE, minpeakheight = 0.2, ndowns = 10, nups = 4, minpeakdistance = 150)
points(df$time[x[, 2]], x[, 1], pch=20, col=adjustcolor("blue", 0.2))
# w <- c(rep(0, 1000), df$score, rep(0, 1000))
# L <- hampel(w, k = 1024, t0 = 20)
#
# points(df$time[L$ind - 1000], df$score[L$ind - 1000], pch=20, col=adjustcolor("red", 0.3))
# sort(pks$selection.table$time[x[, 2]])
# move_imgs(from = .Options$warbleR$wav.path, to = "./data/processed", cut = TRUE, overwrite = TRUE)
df <- pks$scores[pks$scores$time >= 80 & pks$scores$time <= 120, ]
par(mar = rep(2, 4))
plot(df$time, df$score, type = "l", col = adjustcolor("black", 0.5))
abline(h = pks$cutoff, lty = 2, col = "green")
points(pks$selection.table$time, pks$selection.table$score, col = adjustcolor("red", 0.2))
x <- findpeaks(df$score, npeaks=Inf, threshold = 0, sortstr=TRUE, minpeakheight = 0.2, ndowns = 10, nups = 4, minpeakdistance = 150)
points(df$time[x[, 2]], x[, 1], pch=20, col = adjustcolor("blue", 0.2))
# points(df$time[L$ind - 1000], df$score[L$ind - 1000], pch=20, col=adjustcolor("red", 0.3))
df <- pks$scores[pks$scores$time >= 80 & pks$scores$time <= 120, ]
par(mar = rep(2, 4))
plot(df$time, df$score, type = "l", col = adjustcolor("black", 0.5))
abline(h = pks$cutoff, lty = 2, col = "green")
points(pks$selection.table$time[pks$selection.table$time > min(df$time) & pks$selection.table$time < max(df$time)], pks$selection.table$score[pks$selection.table$time > min(df$time) & pks$selection.table$time < max(df$time)], col = adjustcolor("red", 0.2))
x <- findpeaks(df$score, npeaks=Inf, threshold = 0, sortstr=TRUE, minpeakheight = 0.2, ndowns = 10, nups = 4, minpeakdistance = 150)
points(df$time[x[, 2]], x[, 1], pch=20, col = adjustcolor("blue", 0.2))
# points(df$time[L$ind - 1000], df$score[L$ind - 1000], pch=20, col=adjustcolor("red", 0.3))
df <- pks$scores[pks$scores$time >= 80 & pks$scores$time <= 120, ]
par(mar = rep(2, 4))
plot(df$time, df$score, type = "l", col = adjustcolor("black", 1))
abline(h = pks$cutoff, lty = 2, col = "green")
points(pks$selection.table$time[pks$selection.table$time > min(df$time) & pks$selection.table$time < max(df$time)], pks$selection.table$score[pks$selection.table$time > min(df$time) & pks$selection.table$time < max(df$time)], col = adjustcolor("red", 0.1))
x <- findpeaks(df$score, npeaks=Inf, threshold = 0, sortstr=TRUE, minpeakheight = 0.2, ndowns = 10, nups = 4, minpeakdistance = 150)
points(df$time[x[, 2]], x[, 1], pch=20, col = adjustcolor("blue", 0.2))
# points(df$time[L$ind - 1000], df$score[L$ind - 1000], pch=20, col=adjustcolor("red", 0.3))
df <- pks$scores[pks$scores$time >= 80 & pks$scores$time <= 120, ]
par(mar = rep(2, 4))
plot(df$time, df$score, type = "l", col = adjustcolor("black", 1))
abline(h = pks$cutoff, lty = 2, col = "green")
points(pks$selection.table$time[pks$selection.table$time > min(df$time) & pks$selection.table$time < max(df$time)], pks$selection.table$score[pks$selection.table$time > min(df$time) & pks$selection.table$time < max(df$time)], col = adjustcolor("red", 1))
x <- findpeaks(df$score, npeaks=Inf, threshold = 0, sortstr=TRUE, minpeakheight = 0.2, ndowns = 10, nups = 4, minpeakdistance = 150)
points(df$time[x[, 2]], x[, 1], pch=20, col = adjustcolor("blue", 0.2))
# points(df$time[L$ind - 1000], df$score[L$ind - 1000], pch=20, col=adjustcolor("red", 0.3))
df <- pks$scores[pks$scores$time >= 80 & pks$scores$time <= 120, ]
par(mar = rep(2, 4))
plot(df$time, df$score, type = "l", col = adjustcolor("black", 1))
abline(h = pks$cutoff, lty = 2, col = "green")
points(pks$selection.table$time[pks$selection.table$time > min(df$time) & pks$selection.table$time < max(df$time)], pks$selection.table$score[pks$selection.table$time > min(df$time) & pks$selection.table$time < max(df$time)], col = adjustcolor("red", 1))
x <- findpeaks(df$score, npeaks=Inf, threshold = 0, sortstr=TRUE, minpeakheight = 0.2, ndowns = 10, nups = 4, minpeakdistance = 150)
points(df$time[x[, 2]], x[, 1], pch=21, col = adjustcolor("blue", 0.2))
# points(df$time[L$ind - 1000], df$score[L$ind - 1000], pch=20, col=adjustcolor("red", 0.3))
df <- pks$scores[pks$scores$time >= 80 & pks$scores$time <= 120, ]
par(mar = rep(2, 4))
plot(df$time, df$score, type = "l", col = adjustcolor("black", 1))
abline(h = pks$cutoff, lty = 2, col = "green")
points(pks$selection.table$time[pks$selection.table$time > min(df$time) & pks$selection.table$time < max(df$time)], pks$selection.table$score[pks$selection.table$time > min(df$time) & pks$selection.table$time < max(df$time)], col = adjustcolor("red", 1))
x <- findpeaks(df$score, npeaks=Inf, threshold = 0, sortstr=TRUE, minpeakheight = 0.2, ndowns = 10, nups = 4, minpeakdistance = 150)
points(df$time[x[, 2]], x[, 1], pch=21, col = adjustcolor("blue", 1))
# points(df$time[L$ind - 1000], df$score[L$ind - 1000], pch=20, col=adjustcolor("red", 0.3))
df <- pks$scores[pks$scores$time >= 80 & pks$scores$time <= 120, ]
par(mar = rep(2, 4))
plot(df$time, df$score, type = "l", col = adjustcolor("black", 1))
abline(h = pks$cutoff, lty = 2, col = "green")
points(pks$selection.table$time[pks$selection.table$time > min(df$time) & pks$selection.table$time < max(df$time)], pks$selection.table$score[pks$selection.table$time > min(df$time) & pks$selection.table$time < max(df$time)], col = adjustcolor("red", 1))
x <- findpeaks(df$score, npeaks=Inf, threshold = 0, sortstr=TRUE, minpeakheight = 0.2, ndowns = 10, nups = 4, minpeakdistance = 150)
points(df$time[x[, 2]], x[, 1], pch=1, col = adjustcolor("blue", 1))
# points(df$time[L$ind - 1000], df$score[L$ind - 1000], pch=20, col=adjustcolor("red", 0.3))
df <- pks$scores[pks$scores$time >= 80 & pks$scores$time <= 120, ]
par(mar = rep(2, 4))
plot(df$time, df$score, type = "l", col = adjustcolor("black", 1))
abline(h = pks$cutoff, lty = 2, col = "green")
points(pks$selection.table$time[pks$selection.table$time > min(df$time) & pks$selection.table$time < max(df$time)], pks$selection.table$score[pks$selection.table$time > min(df$time) & pks$selection.table$time < max(df$time)], col = adjustcolor("red", 1))
x <- findpeaks(df$score, npeaks=Inf, threshold = 0, sortstr=TRUE, minpeakheight = 0.2, ndowns = 10, nups = 4, minpeakdistance = 150)
points(df$time[x[, 2]], x[, 1], pch=1, col = adjustcolor("blue", 1))
# points(df$time[L$ind - 1000], df$score[L$ind - 1000], pch=20, col=adjustcolor("red", 0.3))
df <- pks$scores[pks$scores$time >= 80 & pks$scores$time <= 120, ]
par(mar = rep(2, 4))
plot(df$time, df$score, type = "l", col = adjustcolor("black", 1))
abline(h = pks$cutoff, lty = 2, col = "green")
points(pks$selection.table$time[pks$selection.table$time > min(df$time) & pks$selection.table$time < max(df$time)], pks$selection.table$score[pks$selection.table$time > min(df$time) & pks$selection.table$time < max(df$time)], col = adjustcolor("red", 1))
x <- findpeaks(df$score, npeaks=Inf, threshold = 0, sortstr=TRUE, minpeakheight = 0.2, ndowns = 10, nups = 4, minpeakdistance = 150)
points(df$time[x[, 2]], x[, 1], pch=20, col = adjustcolor("blue", 1), cex = 1)
# points(df$time[L$ind - 1000], df$score[L$ind - 1000], pch=20, col=adjustcolor("red", 0.3))
df <- pks$scores[pks$scores$time >= 80 & pks$scores$time <= 120, ]
par(mar = rep(2, 4))
plot(df$time, df$score, type = "l", col = adjustcolor("black", 1))
abline(h = pks$cutoff, lty = 2, col = "green")
points(pks$selection.table$time[pks$selection.table$time > min(df$time) & pks$selection.table$time < max(df$time)], pks$selection.table$score[pks$selection.table$time > min(df$time) & pks$selection.table$time < max(df$time)], col = adjustcolor("red", 1))
x <- findpeaks(df$score, npeaks=Inf, threshold = 0.2, sortstr=TRUE, minpeakheight = 0.2, ndowns = 10, nups = 4, minpeakdistance = 150)
points(df$time[x[, 2]], x[, 1], pch=20, col = adjustcolor("blue", 1), cex = 1)
# points(df$time[L$ind - 1000], df$score[L$ind - 1000], pch=20, col=adjustcolor("red", 0.3))
df <- pks$scores[pks$scores$time >= 80 & pks$scores$time <= 120, ]
par(mar = rep(2, 4))
plot(df$time, df$score, type = "l", col = adjustcolor("black", 1))
abline(h = pks$cutoff, lty = 2, col = "green")
points(pks$selection.table$time[pks$selection.table$time > min(df$time) & pks$selection.table$time < max(df$time)], pks$selection.table$score[pks$selection.table$time > min(df$time) & pks$selection.table$time < max(df$time)], col = adjustcolor("red", 1))
x <- findpeaks(df$score, npeaks=Inf, threshold = 0.1, sortstr=TRUE, minpeakheight = 0.2, ndowns = 10, nups = 4, minpeakdistance = 150)
points(df$time[x[, 2]], x[, 1], pch=20, col = adjustcolor("blue", 1), cex = 1)
# points(df$time[L$ind - 1000], df$score[L$ind - 1000], pch=20, col=adjustcolor("red", 0.3))
df <- pks$scores[pks$scores$time >= 80 & pks$scores$time <= 120, ]
par(mar = rep(2, 4))
plot(df$time, df$score, type = "l", col = adjustcolor("black", 1))
abline(h = pks$cutoff, lty = 2, col = "green")
points(pks$selection.table$time[pks$selection.table$time > min(df$time) & pks$selection.table$time < max(df$time)], pks$selection.table$score[pks$selection.table$time > min(df$time) & pks$selection.table$time < max(df$time)], col = adjustcolor("red", 1))
x <- findpeaks(df$score, npeaks=Inf, threshold = 0.05, sortstr=TRUE, minpeakheight = 0.2, ndowns = 10, nups = 4, minpeakdistance = 150)
points(df$time[x[, 2]], x[, 1], pch=20, col = adjustcolor("blue", 1), cex = 1)
# points(df$time[L$ind - 1000], df$score[L$ind - 1000], pch=20, col=adjustcolor("red", 0.3))
df <- pks$scores[pks$scores$time >= 80 & pks$scores$time <= 120, ]
par(mar = rep(2, 4))
plot(df$time, df$score, type = "l", col = adjustcolor("black", 1))
abline(h = pks$cutoff, lty = 2, col = "green")
points(pks$selection.table$time[pks$selection.table$time > min(df$time) & pks$selection.table$time < max(df$time)], pks$selection.table$score[pks$selection.table$time > min(df$time) & pks$selection.table$time < max(df$time)], col = adjustcolor("red", 1))
x <- findpeaks(df$score, npeaks=Inf, threshold = 0.05, sortstr=TRUE, minpeakheight = 0.2, ndowns = 4, nups = 4, minpeakdistance = 150)
points(df$time[x[, 2]], x[, 1], pch=20, col = adjustcolor("blue", 1), cex = 1)
# points(df$time[L$ind - 1000], df$score[L$ind - 1000], pch=20, col=adjustcolor("red", 0.3))
df <- pks$scores[pks$scores$time >= 80 & pks$scores$time <= 120, ]
par(mar = rep(2, 4))
plot(df$time, df$score, type = "l", col = adjustcolor("black", 1))
abline(h = pks$cutoff, lty = 2, col = "green")
points(pks$selection.table$time[pks$selection.table$time > min(df$time) & pks$selection.table$time < max(df$time)], pks$selection.table$score[pks$selection.table$time > min(df$time) & pks$selection.table$time < max(df$time)], col = adjustcolor("red", 1))
x <- findpeaks(df$score, npeaks=Inf, threshold = 0.05, sortstr=TRUE, minpeakheight = 0.2, ndowns = 2, nups = 4, minpeakdistance = 150)
points(df$time[x[, 2]], x[, 1], pch=20, col = adjustcolor("blue", 1), cex = 1)
# points(df$time[L$ind - 1000], df$score[L$ind - 1000], pch=20, col=adjustcolor("red", 0.3))
df <- pks$scores[pks$scores$time >= 80 & pks$scores$time <= 120, ]
par(mar = rep(2, 4))
plot(df$time, df$score, type = "l", col = adjustcolor("black", 1))
abline(h = pks$cutoff, lty = 2, col = "green")
points(pks$selection.table$time[pks$selection.table$time > min(df$time) & pks$selection.table$time < max(df$time)], pks$selection.table$score[pks$selection.table$time > min(df$time) & pks$selection.table$time < max(df$time)], col = adjustcolor("red", 1))
x <- findpeaks(df$score, npeaks=Inf, threshold = 0.05, sortstr=TRUE, minpeakheight = 0.2, ndowns = 4, nups = 4, minpeakdistance = 150)
points(df$time[x[, 2]], x[, 1], pch=20, col = adjustcolor("blue", 1), cex = 1)
# points(df$time[L$ind - 1000], df$score[L$ind - 1000], pch=20, col=adjustcolor("red", 0.3))
df <- pks$scores[pks$scores$time >= 80 & pks$scores$time <= 120, ]
par(mar = rep(2, 4))
plot(df$time, df$score, type = "l", col = adjustcolor("black", 1))
abline(h = pks$cutoff, lty = 2, col = "green")
points(pks$selection.table$time[pks$selection.table$time > min(df$time) & pks$selection.table$time < max(df$time)], pks$selection.table$score[pks$selection.table$time > min(df$time) & pks$selection.table$time < max(df$time)], col = adjustcolor("red", 1))
x <- findpeaks(df$score, npeaks=Inf, threshold = 0.05, sortstr=TRUE, minpeakheight = 0.2, ndowns = 4, nups = 2, minpeakdistance = 150)
points(df$time[x[, 2]], x[, 1], pch=20, col = adjustcolor("blue", 1), cex = 1)
# points(df$time[L$ind - 1000], df$score[L$ind - 1000], pch=20, col=adjustcolor("red", 0.3))
df <- pks$scores[pks$scores$time >= 80 & pks$scores$time <= 120, ]
par(mar = rep(2, 4))
plot(df$time, df$score, type = "l", col = adjustcolor("black", 1))
abline(h = pks$cutoff, lty = 2, col = "green")
points(pks$selection.table$time[pks$selection.table$time > min(df$time) & pks$selection.table$time < max(df$time)], pks$selection.table$score[pks$selection.table$time > min(df$time) & pks$selection.table$time < max(df$time)], col = adjustcolor("red", 1))
x <- findpeaks(df$score, npeaks=Inf, threshold = 0.05, sortstr=TRUE, minpeakheight = 0.2, ndowns = 4, nups = 4, minpeakdistance = 150)
points(df$time[x[, 2]], x[, 1], pch=20, col = adjustcolor("blue", 1), cex = 1)
# points(df$time[L$ind - 1000], df$score[L$ind - 1000], pch=20, col=adjustcolor("red", 0.3))
df <- pks$scores[pks$scores$time >= 80 & pks$scores$time <= 120, ]
par(mar = rep(2, 4))
plot(df$time, df$score, type = "l", col = adjustcolor("black", 1))
abline(h = pks$cutoff, lty = 2, col = "green")
points(pks$selection.table$time[pks$selection.table$time > min(df$time) & pks$selection.table$time < max(df$time)], pks$selection.table$score[pks$selection.table$time > min(df$time) & pks$selection.table$time < max(df$time)], col = adjustcolor("red", 1))
x <- findpeaks(df$score, npeaks=Inf, threshold = 0.05, sortstr=TRUE, minpeakheight = 0.2, ndowns = 4, nups = 4, minpeakdistance = 100)
points(df$time[x[, 2]], x[, 1], pch=20, col = adjustcolor("blue", 1), cex = 1)
# points(df$time[L$ind - 1000], df$score[L$ind - 1000], pch=20, col=adjustcolor("red", 0.3))
df <- pks$scores[pks$scores$time >= 80 & pks$scores$time <= 120, ]
par(mar = rep(2, 4))
plot(df$time, df$score, type = "l", col = adjustcolor("black", 1))
abline(h = pks$cutoff, lty = 2, col = "green")
points(pks$selection.table$time[pks$selection.table$time > min(df$time) & pks$selection.table$time < max(df$time)], pks$selection.table$score[pks$selection.table$time > min(df$time) & pks$selection.table$time < max(df$time)], col = adjustcolor("red", 1))
x <- findpeaks(df$score, npeaks=Inf, threshold = 0.05, sortstr=TRUE, minpeakheight = 0.2, ndowns = 4, nups = 4, minpeakdistance = 10)
points(df$time[x[, 2]], x[, 1], pch=20, col = adjustcolor("blue", 1), cex = 1)
# points(df$time[L$ind - 1000], df$score[L$ind - 1000], pch=20, col=adjustcolor("red", 0.3))
df <- pks$scores[pks$scores$time >= 80 & pks$scores$time <= 120, ]
par(mar = rep(2, 4))
plot(df$time, df$score, type = "l", col = adjustcolor("black", 1))
abline(h = pks$cutoff, lty = 2, col = "green")
points(pks$selection.table$time[pks$selection.table$time > min(df$time) & pks$selection.table$time < max(df$time)], pks$selection.table$score[pks$selection.table$time > min(df$time) & pks$selection.table$time < max(df$time)], col = adjustcolor("red", 1))
x <- findpeaks(df$score, npeaks=Inf, threshold = 0.05, sortstr=TRUE, minpeakheight = 0.2, ndowns = 4, nups = 4, minpeakdistance = 1)
points(df$time[x[, 2]], x[, 1], pch=20, col = adjustcolor("blue", 1), cex = 1)
# points(df$time[L$ind - 1000], df$score[L$ind - 1000], pch=20, col=adjustcolor("red", 0.3))
df <- pks$scores[pks$scores$time >= 80 & pks$scores$time <= 120, ]
par(mar = rep(2, 4))
plot(df$time, df$score, type = "l", col = adjustcolor("black", 1))
abline(h = pks$cutoff, lty = 2, col = "green")
points(pks$selection.table$time[pks$selection.table$time > min(df$time) & pks$selection.table$time < max(df$time)], pks$selection.table$score[pks$selection.table$time > min(df$time) & pks$selection.table$time < max(df$time)], col = adjustcolor("red", 1))
x <- findpeaks(df$score, npeaks=Inf, threshold = 0.05, sortstr=TRUE, minpeakheight = 0.2, ndowns = 4, nups = 4, minpeakdistance = 1)
points(df$time[x[, 2]], x[, 1], pch=20, col = adjustcolor("blue", 1), cex = 1)
# points(df$time[L$ind - 1000], df$score[L$ind - 1000], pch=20, col=adjustcolor("red", 0.3))
df <- pks$scores[pks$scores$time >= 80 & pks$scores$time <= 120, ]
par(mar = rep(2, 4))
plot(df$time, df$score, type = "l", col = adjustcolor("black", 1))
abline(h = pks$cutoff, lty = 2, col = "green")
points(pks$selection.table$time[pks$selection.table$time > min(df$time) & pks$selection.table$time < max(df$time)], pks$selection.table$score[pks$selection.table$time > min(df$time) & pks$selection.table$time < max(df$time)], col = adjustcolor("red", 1))
x <- findpeaks(df$score, npeaks=Inf, threshold = 0.05, sortstr=TRUE, minpeakheight = 0.2, ndowns = 4, nups = 4, minpeakdistance = 0)
points(df$time[x[, 2]], x[, 1], pch=20, col = adjustcolor("blue", 1), cex = 1)
# points(df$time[L$ind - 1000], df$score[L$ind - 1000], pch=20, col=adjustcolor("red", 0.3))
df <- pks$scores[pks$scores$time >= 80 & pks$scores$time <= 120, ]
par(mar = rep(2, 4))
plot(df$time, df$score, type = "l", col = adjustcolor("black", 1))
abline(h = pks$cutoff, lty = 2, col = "green")
points(pks$selection.table$time[pks$selection.table$time > min(df$time) & pks$selection.table$time < max(df$time)], pks$selection.table$score[pks$selection.table$time > min(df$time) & pks$selection.table$time < max(df$time)], col = adjustcolor("red", 1))
x <- findpeaks(df$score, npeaks=Inf, threshold = 0.05, sortstr=TRUE, minpeakheight = 0.2, ndowns = 4, nups = 4, minpeakdistance = 0)
points(df$time[x[, 2]], x[, 1], pch=20, col = adjustcolor("blue", 1), cex = 1)
# points(df$time[L$ind - 1000], df$score[L$ind - 1000], pch=20, col=adjustcolor("red", 0.3))
df <- pks$scores[pks$scores$time >= 80 & pks$scores$time <= 120, ]
par(mar = rep(2, 4))
plot(df$time, df$score, type = "l", col = adjustcolor("black", 1))
abline(h = pks$cutoff, lty = 2, col = "green")
points(pks$selection.table$time[pks$selection.table$time > min(df$time) & pks$selection.table$time < max(df$time)], pks$selection.table$score[pks$selection.table$time > min(df$time) & pks$selection.table$time < max(df$time)], col = adjustcolor("red", 1))
x <- findpeaks(df$score, npeaks=Inf, threshold = 0.05, sortstr=TRUE, minpeakheight = 0.2, ndowns = 2, nups = 4, minpeakdistance = 0)
points(df$time[x[, 2]], x[, 1], pch=20, col = adjustcolor("blue", 1), cex = 1)
# points(df$time[L$ind - 1000], df$score[L$ind - 1000], pch=20, col=adjustcolor("red", 0.3))
df <- pks$scores[pks$scores$time >= 80 & pks$scores$time <= 120, ]
par(mar = rep(2, 4))
plot(df$time, df$score, type = "l", col = adjustcolor("black", 1))
abline(h = pks$cutoff, lty = 2, col = "green")
points(pks$selection.table$time[pks$selection.table$time > min(df$time) & pks$selection.table$time < max(df$time)], pks$selection.table$score[pks$selection.table$time > min(df$time) & pks$selection.table$time < max(df$time)], col = adjustcolor("red", 1))
x <- findpeaks(df$score, npeaks=Inf, threshold = 0.05, sortstr=TRUE, minpeakheight = 0.2, ndowns = 20, nups = 4, minpeakdistance = 0)
points(df$time[x[, 2]], x[, 1], pch=20, col = adjustcolor("blue", 1), cex = 1)
# points(df$time[L$ind - 1000], df$score[L$ind - 1000], pch=20, col=adjustcolor("red", 0.3))
df <- pks$scores[pks$scores$time >= 80 & pks$scores$time <= 120, ]
par(mar = rep(2, 4))
plot(df$time, df$score, type = "l", col = adjustcolor("black", 1))
abline(h = pks$cutoff, lty = 2, col = "green")
points(pks$selection.table$time[pks$selection.table$time > min(df$time) & pks$selection.table$time < max(df$time)], pks$selection.table$score[pks$selection.table$time > min(df$time) & pks$selection.table$time < max(df$time)], col = adjustcolor("red", 1))
x <- findpeaks(df$score, npeaks=Inf, threshold = 0.05, sortstr=TRUE, minpeakheight = 0.2, ndowns = 20, nups = 4, minpeakdistance = 0)
points(df$time[x[, 2]], x[, 1], pch=20, col = adjustcolor("blue", 1), cex = 1)
# points(df$time[L$ind - 1000], df$score[L$ind - 1000], pch=20, col=adjustcolor("red", 0.3))
xc.output <- readRDS("./output/detection_xcorr.RDS")
# find peaks
pks <- find_peaks(xc.output = xc.output, pb = TRUE, cutoff = 0.5, output = "list")
pks$bottom.freq <-  13.3548
pks$top.freq <-  42.8226
lspec(pks, sxrow = 2, flim = c(10, 50), ovlp = 50, fast.spec = TRUE, it = "tiff")
move_imgs(from = .Options$warbleR$wav.path, to = "./data/processed/mfcc_detection", cut = TRUE, overwrite = TRUE)
pks$selection.table
head(pks)
head(pks$selection.table)
pks$selection.table$bottom.freq <-  13.3548
pks$selection.table$top.freq <-  42.8226
write.csv(pks$selection.table, "./data/processed/peaks_xcorr_mfcc.csv", row.names = FALSE)
Rraven::exp_raven(X = pks$selection.table, single.file = TRUE, sound.file.path = .Options$warbleR$wav.path, file.name = "./data/processed/peaks_xcorr_mfcc_for_raven.txt")
